import{A as e,$ as a,E as t,G as l,r as i,o as n,c as r,f as o,k as s,g as u,t as d}from"./vendor.e2554b35.js";import"./moment.08a7f518.js";import"./md5.66ee5649.js";const c={name:"ShopManage",mounted(){this.ctx=e(),this.initTableData()},data:()=>({currentViewAction:{},actionDetailVisible:!1,currentPage:1,total:0,queryData:null,ctx:{},addVisible:!1,itemNameCache:[],queryParam:{steamid:"",eosid:"",username:"",itemname:"",getchanel:"",status:"",group:"",type:"",page:"1",limit:"10"},chanels:{1:"系统中获得",2:"下架物品",3:"玩家交易",4:"供货",5:"游戏内容器",6:"签到",7:"补签",8:"抽奖",9:"阶段任务",10:"红包"},status:{1:"正常在库",2:"已发放到游戏内",3:"自行删除",4:"自行卖出",5:"供货消耗",6:"抽奖消耗",7:"补签消耗",8:"管理员删除"}}),methods:{handleEdtor(){if(!this.instance){console.log(a("#editor")),this.editor=new wangEditor("#editor");let e=this;this.editor.config.onchange=function(a){e.currentViewAction.desc=a},this.editor.config.onchangeTimeout=100,this.editor.create(),this.instance=!0}this.editor.txt.html(this.currentViewAction.desc)},getchanel(e){return this.chanels[e+""]},getstatus(e){return this.status[e+""]},handleSizeChange(e){this.queryParam.limit=e+"",this.queryParam.page="1",this.initTableData()},handleCurrentChange(e){console.log(e),this.queryParam.page=e+"",this.initTableData()},initTableData(){t.post("api/getGameActionByPage",this.queryParam).then((e=>{"1"===e.data.respCode?(this.queryData=e.data.data.data,this.total=e.data.data.count,a(".imgDesc").attr("src","'404'")):(this.queryData=null,l.error(e.data.respMsg))}))},openUpdate(e){this.actionDetailVisible=!0,this.currentViewAction=e.row,a(".imgDescDetail").attr("src","'404'"),this.$nextTick((()=>{this.handleEdtor()}))},handleAvatarSuccess(){l({message:"上传成功!",type:"success"}),this.initIconData()},handleAvatarFaild(){l.error("上传失败"),this.initIconData()},handleSelectImage(e){this.currentViewAction.avatar=e}}},m={class:"crumbs"},h=o("i",{class:"el-icon-lx-cascades"},null,-1),g=u(" 用户信息 "),p={class:"handle-box"},b=u("搜索"),y={class:"container"},f={class:"dialog-footer"},V=u("关闭");c.render=function(e,a,t,l,c,D){const P=i("el-breadcrumb-item"),w=i("el-breadcrumb"),q=i("el-option"),C=i("el-select"),v=i("el-input"),_=i("el-button"),k=i("el-table-column"),S=i("el-table"),T=i("el-pagination"),z=i("el-dialog");return n(),r("div",null,[o("div",m,[o(w,{separator:"/"},{default:s((()=>[o(P,null,{default:s((()=>[h,g])),_:1})])),_:1})]),o("div",p,[o(C,{modelValue:c.queryParam.type,"onUpdate:modelValue":a[1]||(a[1]=e=>c.queryParam.type=e),placeholder:"物品类型",class:"handle-select mr10",onChange:D.initTableData},{default:s((()=>[o(q,{key:"-1",label:"全部",value:""}),o(q,{key:"1",label:"击杀僵尸",value:"1"}),o(q,{key:"2",label:"击杀动物",value:"2"}),o(q,{key:"3",label:"击杀玩家",value:"3"})])),_:1},8,["modelValue","onChange"]),o(v,{modelValue:c.queryParam.username,"onUpdate:modelValue":a[2]||(a[2]=e=>c.queryParam.username=e),placeholder:"用户名或者店铺名",class:"handle-input mr10"},null,8,["modelValue"]),o(v,{modelValue:c.queryParam.steamid,"onUpdate:modelValue":a[3]||(a[3]=e=>c.queryParam.steamid=e),placeholder:"SteamID",class:"handle-input mr10"},null,8,["modelValue"]),o(v,{modelValue:c.queryParam.eosid,"onUpdate:modelValue":a[4]||(a[4]=e=>c.queryParam.eosid=e),placeholder:"EOSID",class:"handle-input mr10"},null,8,["modelValue"]),o(_,{type:"primary",icon:"el-icon-search",onClick:D.initTableData},{default:s((()=>[b])),_:1},8,["onClick"])]),o("div",y,[o(S,{border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",data:c.queryData},{default:s((()=>[o(k,{prop:"action.id",label:"ID",width:"55",align:"center"}),o(k,{label:"操作时间",align:"center"},{default:s((e=>[u(d(e.row.action.actTime.substring(0,19).replace("T"," ")),1)])),_:1}),o(k,{label:"操作描述",align:"center"},{default:s((e=>[u(d(e.row.action.desc),1)])),_:1}),o(k,{label:"用户名",align:"center"},{default:s((e=>[u(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].name:""),1)])),_:1}),o(k,{label:"SteamID",align:"center"},{default:s((e=>[u(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].gameentityid:""),1)])),_:1}),o(k,{label:"EOSID",align:"center"},{default:s((e=>[u(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].platformid:""),1)])),_:1})])),_:1},8,["data"]),o(T,{currentPage:c.currentPage,"onUpdate:currentPage":a[5]||(a[5]=e=>c.currentPage=e),"page-size":c.queryParam.limit,"onUpdate:page-size":a[6]||(a[6]=e=>c.queryParam.limit=e),"page-sizes":[10,50,200,1e3],disabled:!1,background:!0,layout:"total, sizes, prev, pager, next",total:c.total,onSizeChange:D.handleSizeChange,onCurrentChange:D.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),o(z,{title:"详细信息",modelValue:c.actionDetailVisible,"onUpdate:modelValue":a[8]||(a[8]=e=>c.actionDetailVisible=e),width:"40%","append-to-body":!0,"close-on-click-modal":!1},{footer:s((()=>[o("span",f,[o(_,{type:"primary",onClick:a[7]||(a[7]=()=>{this.actionDetailVisible=!1})},{default:s((()=>[V])),_:1})])])),_:1},8,["modelValue"])])};export default c;
