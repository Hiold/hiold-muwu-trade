import{A as e,$ as a,E as l,G as t,r as i,o as n,c as r,f as u,k as o,g as s,t as d}from"./vendor.e2554b35.js";import"./moment.08a7f518.js";import"./md5.66ee5649.js";const c={name:"ShopManage",mounted(){this.ctx=e(),this.initTableData()},data:()=>({currentViewAction:{},actionDetailVisible:!1,currentPage:1,total:0,queryData:null,ctx:{},addVisible:!1,itemNameCache:[],queryParam:{steamid:"",eosid:"",username:"",itemname:"",getchanel:"",status:"",group:"",type:"",page:"1",limit:"10"},chanels:{1:"系统中获得",2:"下架物品",3:"玩家交易",4:"供货",5:"游戏内容器",6:"签到",7:"补签",8:"抽奖",9:"阶段任务",10:"红包"},status:{1:"正常在库",2:"已发放到游戏内",3:"自行删除",4:"自行卖出",5:"供货消耗",6:"抽奖消耗",7:"补签消耗",8:"管理员删除"}}),methods:{handleEdtor(){if(!this.instance){console.log(a("#editor")),this.editor=new wangEditor("#editor");let e=this;this.editor.config.onchange=function(a){e.currentViewAction.desc=a},this.editor.config.onchangeTimeout=100,this.editor.create(),this.instance=!0}this.editor.txt.html(this.currentViewAction.desc)},getchanel(e){return this.chanels[e+""]},getstatus(e){return this.status[e+""]},handleSizeChange(e){this.queryParam.limit=e+"",this.queryParam.page="1",this.initTableData()},handleCurrentChange(e){console.log(e),this.queryParam.page=e+"",this.initTableData()},initTableData(){l.post("api/getActionByPage",this.queryParam).then((e=>{"1"===e.data.respCode?(this.queryData=e.data.data.data,this.total=e.data.data.count,a(".imgDesc").attr("src","'404'")):(this.queryData=null,t.error(e.data.respMsg))}))},openUpdate(e){this.actionDetailVisible=!0,this.currentViewAction=e.row,a(".imgDescDetail").attr("src","'404'"),this.$nextTick((()=>{this.handleEdtor()}))},handleAvatarSuccess(){t({message:"上传成功!",type:"success"}),this.initIconData()},handleAvatarFaild(){t.error("上传失败"),this.initIconData()},handleSelectImage(e){this.currentViewAction.avatar=e}}},m={class:"crumbs"},b=u("i",{class:"el-icon-lx-cascades"},null,-1),h=s(" 用户信息 "),y={class:"handle-box"},g=s("搜索"),p={class:"container"},v={class:"dialog-footer"},k=s("关闭");c.render=function(e,a,l,t,c,f){const V=i("el-breadcrumb-item"),D=i("el-breadcrumb"),P=i("el-option"),w=i("el-select"),q=i("el-input"),C=i("el-button"),_=i("el-table-column"),S=i("el-table"),T=i("el-pagination"),z=i("el-dialog");return n(),r("div",null,[u("div",m,[u(D,{separator:"/"},{default:o((()=>[u(V,null,{default:o((()=>[b,h])),_:1})])),_:1})]),u("div",y,[u(w,{modelValue:c.queryParam.type,"onUpdate:modelValue":a[1]||(a[1]=e=>c.queryParam.type=e),placeholder:"物品类型",class:"handle-select mr10",onChange:f.initTableData},{default:o((()=>[u(P,{key:"-1",label:"全部",value:""}),u(P,{key:"0",label:"登录",value:"0"}),u(P,{key:"1",label:"购买物品",value:"1"}),u(P,{key:"2",label:"出售物品",value:"2"}),u(P,{key:"3",label:"取回",value:"3"}),u(P,{key:"4",label:"上架求购",value:"4"}),u(P,{key:"5",label:"购买玩家交易物品",value:"5"}),u(P,{key:"6",label:"供货",value:"6"}),u(P,{key:"7",label:"图片上传",value:"7"}),u(P,{key:"8",label:"从游戏内容器提取物品到交易系统",value:"8"}),u(P,{key:"9",label:"添加系统售卖物品",value:"9"}),u(P,{key:"10",label:"更新了系统售卖物品信息",value:"10"}),u(P,{key:"11",label:"删除系统售卖物品",value:"11"}),u(P,{key:"12",label:"库存提取到游戏中",value:"12"}),u(P,{key:"13",label:"家自主删除物品 无补偿",value:"13"}),u(P,{key:"14",label:"添加收藏物品",value:"14"}),u(P,{key:"15",label:"取消收藏物品",value:"15"}),u(P,{key:"16",label:"更新玩家基础信息",value:"16"}),u(P,{key:"17",label:"取消求购",value:"17"}),u(P,{key:"18",label:"物品被购买",value:"18"}),u(P,{key:"19",label:"被供货",value:"19"}),u(P,{key:"20",label:"添加红包",value:"20"}),u(P,{key:"21",label:"修改红包",value:"21"}),u(P,{key:"22",label:"删除红包",value:"22"}),u(P,{key:"23",label:"添加奖品",value:"23"}),u(P,{key:"24",label:"修改奖品",value:"24"}),u(P,{key:"25",label:"删除奖品",value:"25"}),u(P,{key:"26",label:"领取红包",value:"26"}),u(P,{key:"27",label:"添加阶段任务",value:"27"}),u(P,{key:"28",label:"修改阶段任务",value:"28"}),u(P,{key:"29",label:"删除阶段任务",value:"29"}),u(P,{key:"31",label:"领取阶段任务奖励",value:"31"}),u(P,{key:"32",label:"添加抽奖",value:"32"}),u(P,{key:"33",label:"修改抽奖",value:"33"}),u(P,{key:"34",label:"删除抽奖",value:"34"}),u(P,{key:"35",label:"抽奖",value:"35"}),u(P,{key:"36",label:"添加签到",value:"36"}),u(P,{key:"37",label:"修改签到",value:"37"}),u(P,{key:"38",label:"删除签到",value:"38"}),u(P,{key:"39",label:"签到",value:"39"}),u(P,{key:"40",label:"补签",value:"40"})])),_:1},8,["modelValue","onChange"]),u(q,{modelValue:c.queryParam.username,"onUpdate:modelValue":a[2]||(a[2]=e=>c.queryParam.username=e),placeholder:"用户名或者店铺名",class:"handle-input mr10"},null,8,["modelValue"]),u(q,{modelValue:c.queryParam.steamid,"onUpdate:modelValue":a[3]||(a[3]=e=>c.queryParam.steamid=e),placeholder:"SteamID",class:"handle-input mr10"},null,8,["modelValue"]),u(q,{modelValue:c.queryParam.eosid,"onUpdate:modelValue":a[4]||(a[4]=e=>c.queryParam.eosid=e),placeholder:"EOSID",class:"handle-input mr10"},null,8,["modelValue"]),u(C,{type:"primary",icon:"el-icon-search",onClick:f.initTableData},{default:o((()=>[g])),_:1},8,["onClick"])]),u("div",p,[u(S,{border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",data:c.queryData},{default:o((()=>[u(_,{prop:"action.id",label:"ID",width:"55",align:"center"}),u(_,{label:"操作时间",align:"center"},{default:o((e=>[s(d(e.row.action.actTime.substring(0,19).replace("T"," ")),1)])),_:1}),u(_,{label:"操作描述",align:"center"},{default:o((e=>[s(d(e.row.action.desc),1)])),_:1}),u(_,{label:"用户名",align:"center"},{default:o((e=>[s(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].name:""),1)])),_:1}),u(_,{label:"SteamID",align:"center"},{default:o((e=>[s(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].gameentityid:""),1)])),_:1}),u(_,{label:"EOSID",align:"center"},{default:o((e=>[s(d(null!=e.row.userinfo&&e.row.userinfo.length>0?e.row.userinfo[0].platformid:""),1)])),_:1})])),_:1},8,["data"]),u(T,{currentPage:c.currentPage,"onUpdate:currentPage":a[5]||(a[5]=e=>c.currentPage=e),"page-size":c.queryParam.limit,"onUpdate:page-size":a[6]||(a[6]=e=>c.queryParam.limit=e),"page-sizes":[10,50,200,1e3],disabled:!1,background:!0,layout:"total, sizes, prev, pager, next",total:c.total,onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),u(z,{title:"详细信息",modelValue:c.actionDetailVisible,"onUpdate:modelValue":a[8]||(a[8]=e=>c.actionDetailVisible=e),width:"40%","append-to-body":!0,"close-on-click-modal":!1},{footer:o((()=>[u("span",v,[u(C,{type:"primary",onClick:a[7]||(a[7]=()=>{this.actionDetailVisible=!1})},{default:o((()=>[k])),_:1})])])),_:1},8,["modelValue"])])};export default c;
