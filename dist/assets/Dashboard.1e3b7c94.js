var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(e,a,i)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i;import{I as l,o,c as n,f as d,E as h,p as r,a as c,r as g,t as f,w as u}from"./vendor.531192b1.js";var v={exports:{}},p=v.exports=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=window.devicePixelRatio||1,i=10*a,s=i/2;return function(){function l(t,e){var o,n,d,h;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.canvas=(o=t,n=document.getElementById(o),d=n.parentNode.clientWidth,h=n.parentNode.clientHeight,n.style.width=d+"px",n.style.height=h+"px",n.width=d*a,n.height=h*a,n),this.ctx=this.canvas.getContext("2d"),this.type="bar",this.showValue=!0,this.showGrid=!0,this.topPadding=60*a,this.leftPadding=50*a,this.rightPadding=10*a,this.bottomPadding=50*a,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.xRotate=0,this.yRotate=0,this.bgColor="#fff",this.axisColor="#666",this.gridColor="#eee",this.title={text:"",color:"#666",position:"top",font:"bold "+18*a+"px Arial",top:i,bottom:s},this.legend={display:!0,position:"top",color:"#666",font:14*a+"px Arial",top:45*a,bottom:15*a,textWidth:0},this.radius=100*a,this.innerRadius=60*a,this.colorList=["#4A90E2","#F5A623","#ff5858","#5e64ff","#2AC766","#743ee2","#b554ff","#199475"],this.init(e)}return function(e,a,i){a&&t(e.prototype,a),i&&t(e,i)}(l,[{key:"init",value:function(t){if(t.title=Object.assign({},this.title,t.title),t.legend=Object.assign({},this.legend,t.legend),Object.assign(this,t),!t.labels||!t.labels.length)throw new Error("缺少主要参数labels");if(!t.datasets||!t.datasets.length)throw new Error("缺少主要参数datasets");this.drawBackground(),"bar"===this.type||"line"===this.type?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:"renderBarChart",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-i)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-i)/this.labels.length),this.ySpace=function(t,a){var i=t.map((function(t){return t.data.reduce((function(t,e){return e<t?t:e}))})),s=Math.ceil(Math.max.apply(Math,e(i))/a),l=s.toString().length-1;return l=2<l?2:l,Math.ceil(s/Math.pow(10,l))*Math.pow(10,l)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:"drawBarContent",value:function(){var t=this.ctx,e=this.datasets.length;t.beginPath();for(var l=0;l<e;l++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.datasets[l].label).width),t.fillStyle=t.strokeStyle=this.datasets[l].fillColor||this.colorList[l];for(var o=this.datasets[l].data,n=0;n<o.length;n++)if(!(n>this.labels.length-1)){var d=this.xLength/(e+1),h=this.yLength/this.ySpace,r=this.leftPadding+this.xLength*n+d*(l+.5),c=r+d,g=this.canvas.height-this.bottomPadding,f=g-o[n]*h;if("bar"===this.type)t.fillRect(r,f,c-r,g-f),this.drawValue(o[n],r+d/2,f-s);else if("line"===this.type){var u=this.leftPadding+this.xLength*(n+.5);t.beginPath(),t.arc(u,f,3*a,0,2*Math.PI,!0),t.fill(),0!==n&&(t.beginPath(),t.strokeStyle=this.datasets[l].fillColor||this.colorList[l],t.lineWidth=2*a,t.moveTo(u-this.xLength,g-o[n-1]*h),t.lineTo(u,f),t.stroke(),t.lineWidth=1*a),this.drawValue(o[n],u,f-i)}}}t.stroke()}},{key:"renderPieChart",value:function(){for(var t=this.ctx,e=this.labels.length,a=this.datasets[0],i=a.data,s=i.reduce((function(t,e){return t+e})),l=-Math.PI/2,o=this.canvas.width/2,n=this.canvas.height/2,d=0;d<e;d++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.labels[d]).width),t.beginPath(),t.strokeStyle=t.fillStyle=a.colorList&&a.colorList[d]||this.colorList[d],t.moveTo(o,n);var h=l,r=l+=i[d]/s*2*Math.PI;t.arc(o,n,this.radius,h,r),t.closePath(),t.fill();var c=(h+r)/2;this.drawPieValue(i[d],c)}"ring"===this.type&&(t.beginPath(),t.fillStyle=this.bgColor,t.arc(o,n,this.innerRadius,0,2*Math.PI),t.closePath(),t.fill())}},{key:"drawValue",value:function(t,e,i){var s=this.ctx;this.showValue&&(s.textBaseline="middle",s.font=12*a+"px Arial",s.textAlign="center",s.fillText(t,e,i))}},{key:"drawPieValue",value:function(t,e){var a=this.ctx;if(this.showValue){var s=this.canvas.width/2,l=this.canvas.height/2,o=Math.ceil(Math.abs(this.radius*Math.cos(e))),n=Math.floor(Math.abs(this.radius*Math.sin(e)));a.textBaseline="middle",this.showValue&&(e<=0?(a.textAlign="left",a.moveTo(s+o,l-n),a.lineTo(s+o+i,l-n-i),a.moveTo(s+o+i,l-n-i),a.lineTo(s+o+3*i,l-n-i),a.stroke(),a.fillText(t,s+o+3.5*i,l-n-i)):0<e&&e<=Math.PI/2?(a.textAlign="left",a.moveTo(s+o,l+n),a.lineTo(s+o+i,l+n+i),a.moveTo(s+o+i,l+n+i),a.lineTo(s+o+3*i,l+n+i),a.stroke(),a.fillText(t,s+o+3.5*i,l+n+i)):e>Math.PI/2&&e<Math.PI?(a.textAlign="right",a.moveTo(s-o,l+n),a.lineTo(s-o-i,l+n+i),a.moveTo(s-o-i,l+n+i),a.lineTo(s-o-3*i,l+n+i),a.stroke(),a.fillText(t,s-o-3.5*i,l+n+i)):(a.textAlign="right",a.moveTo(s-o,l-n),a.lineTo(s-o-i,l-n-i),a.moveTo(s-o-i,l-n-i),a.lineTo(s-o-3*i,l-n-i),a.stroke(),a.fillText(t,s-o-3.5*i,l-n-i)))}}},{key:"drawBackground",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:"drawTitle",value:function(){var t=this.title;if(t.text){var e=this.ctx;e.beginPath(),e.font=t.font,e.textAlign="center",e.fillStyle=t.color,"top"===t.position?(e.textBaseline="top",e.fillText(t.text,this.canvas.width/2,t.top)):(e.textBaseline="bottom",e.fillText(t.text,this.canvas.width/2,this.canvas.height-t.bottom))}}},{key:"drawXAxis",value:function(){var t=this.ctx,e=this.canvas.height-this.bottomPadding+.5;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding,e),t.lineTo(this.canvas.width-this.rightPadding,e),t.stroke(),this.drawXPoint()}},{key:"drawXPoint",value:function(){var t=this.ctx;t.beginPath(),t.font=12*a+"px Microsoft YaHei",t.textAlign=this.xRorate||this.xRotate?"right":"center",t.textBaseline="top",t.fillStyle=this.axisColor;for(var e=0;e<this.labels.length;e++){var l=this.labels[e],o=this.leftPadding+this.xLength*(e+1)+.5,n=this.canvas.height-this.bottomPadding;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(o,n),t.lineTo(o,this.topPadding+i)):(t.moveTo(o,n),t.lineTo(o,n-s)),t.stroke(),t.save(),t.translate(o-this.xLength/2,n+s),this.xRorate?t.rotate(-this.xRorate*Math.PI/180):t.rotate(-this.xRotate*Math.PI/180),t.fillText(l,0,0),t.restore()}}},{key:"drawYAxis",value:function(){var t=this.ctx;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),t.lineTo(this.leftPadding-.5,this.topPadding+.5),t.stroke(),this.drawYPoint()}},{key:"drawYPoint",value:function(){var t=this.ctx;t.font=12*a+"px Microsoft YaHei",t.textAlign="right",t.textBaseline="middle",t.beginPath();for(var e=0;e<this.yEqual;e++){var l=this.leftPadding,o=this.canvas.height-this.bottomPadding-this.yLength*(e+1)+.5;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(l,o),t.lineTo(this.canvas.width-this.rightPadding-i,o)):(t.strokeStyle=this.axisColor,t.moveTo(l-s,o),t.lineTo(l,o)),t.stroke(),t.save(),t.fillStyle=this.axisColor,t.translate(l-i,o),this.yRorate?t.rotate(-this.yRorate*Math.PI/180):t.rotate(-this.yRotate*Math.PI/180),t.fillText(this.ySpace*(e+1),0,0),t.restore()}}},{key:"drawLegend",value:function(){var t=this.legend;if(t.display){var e=this.ctx,a="pie"===this.type||"ring"===this.type;e.beginPath(),e.font=t.font,e.textAlign="left",e.textBaseline="middle";for(var l=a?this.labels.length:this.datasets.length,o=(this.canvas.width-(this.legend.textWidth+(5*l-2)*i))/2,n=0,d=0;d<l;d++){var h=a?this.datasets[0]:this.datasets[d],r=(a?this.labels[d]:h.label)||"";e.fillStyle=h.colorList&&h.colorList[d]||h.fillColor||this.colorList[d],"top"===t.position?(this.drawLegendIcon(o+5*i*d+n,t.top-s,2*i,i),e.fillStyle=t.color,e.fillText(r,o+(5*d+3)*i+n,t.top)):"bottom"===t.position?(this.drawLegendIcon(o+5*i*d+n,this.canvas.height-t.bottom-s,2*i,i),e.fillStyle=t.color,e.fillText(r,o+(5*d+3)*i+n,this.canvas.height-t.bottom)):(e.fillRect(i,t.top+2*i*d,2*i,i),e.fillStyle=t.color,e.fillText(r,4*i,t.top+2*i*d+.5*i)),n+=Math.ceil(e.measureText(r).width)}}}},{key:"drawLegendIcon",value:function(t,e,l,o){var n=this.ctx;"line"===this.type?(n.beginPath(),n.strokeStyle=n.fillStyle,n.lineWidth=2*a,n.moveTo(t,e+s),n.lineTo(t+2*i,e+s),n.stroke(),n.lineWidth=1*a,n.arc(t+i,e+s,3*a,0,2*Math.PI,!0),n.fill()):n.fillRect(t,e,l,o)}}]),l}()}();const y={props:{canvasId:{type:String,default:"",required:!0},options:{type:Object,required:!0}},mounted(){this.renderChart()},methods:{renderChart(){if(!this.checkOptions())return;const t=((t,l)=>{for(var o in l||(l={}))a.call(l,o)&&s(t,o,l[o]);if(e)for(var o of e(l))i.call(l,o)&&s(t,o,l[o]);return t})({},this.options);new p(this.canvasId,t)},checkOptions(){const t=this.options;return!(!t.datasets||!t.datasets.length)&&!(!t.labels||!t.labels.length)}},watch:{options:{handler(t,e){this.renderChart()},deep:!0}}};y.render=function(t,e,a,i,s,l){return o(),n("div",null,[d("canvas",{id:a.canvasId},null,8,["id"])])};const x={name:"dashboard",components:{Schart:y},data:()=>({todayView:0,todayActive:0,todayTrade:0,todayTradeAmount:0,todaySell:0,todaySellAmount:0,user:{type:"line",title:{text:"最近7天用户数据"}},trade:{type:"line",title:{text:"最近7天交易数据"}},sell:{type:"line",title:{text:"最近7天系统售卖"}}}),methods:{handleDate:t=>t.substring(5,t.length)},mounted(){let t={id:""};h.post("api/getDailyUser",t).then((t=>{if("1"===t.data.respCode){let e=t.data.data;this.todayView=e[6].data[0],this.todayActive=e[6].data[1],this.user={type:"line",title:{text:"最近7天用户数据"},labels:[this.handleDate(e[0].date),this.handleDate(e[1].date),this.handleDate(e[2].date),this.handleDate(e[3].date),this.handleDate(e[4].date),this.handleDate(e[5].date),this.handleDate(e[6].date)],datasets:[{label:"访问量",data:[e[0].data[0],e[1].data[0],e[2].data[0],e[3].data[0],e[4].data[0],e[5].data[0],e[6].data[0]]},{label:"活跃数",data:[e[0].data[1],e[1].data[1],e[2].data[1],e[3].data[1],e[4].data[1],e[5].data[1],e[6].data[1]]}]}}})),h.post("api/getDailyTrade",t).then((t=>{if("1"===t.data.respCode){let e=t.data.data;this.todayTrade=e[6].data[0],this.todayTradeAmount=e[6].data[1],this.trade={type:"line",title:{text:"最近7天交易数据"},labels:[this.handleDate(e[0].date),this.handleDate(e[1].date),this.handleDate(e[2].date),this.handleDate(e[3].date),this.handleDate(e[4].date),this.handleDate(e[5].date),this.handleDate(e[6].date)],datasets:[{label:"交易量",data:[e[0].data[0],e[1].data[0],e[2].data[0],e[3].data[0],e[4].data[0],e[5].data[0],e[6].data[0]]},{label:"交易额",data:[e[0].data[1],e[1].data[1],e[2].data[1],e[3].data[1],e[4].data[1],e[5].data[1],e[6].data[1]]}]}}})),h.post("api/getDailySell",t).then((t=>{if("1"===t.data.respCode){let e=t.data.data;this.todaySell=e[6].data[0],this.todaySellAmount=e[6].data[1],this.sell={type:"line",title:{text:"最近7天系统售卖"},labels:[this.handleDate(e[0].date),this.handleDate(e[1].date),this.handleDate(e[2].date),this.handleDate(e[3].date),this.handleDate(e[4].date),this.handleDate(e[5].date),this.handleDate(e[6].date)],datasets:[{label:"交易量",data:[e[0].data[0],e[1].data[0],e[2].data[0],e[3].data[0],e[4].data[0],e[5].data[0],e[6].data[0]]},{label:"交易额",data:[e[0].data[1],e[1].data[1],e[2].data[1],e[3].data[1],e[4].data[1],e[5].data[1],e[6].data[1]]}]}}}))}},b=u();r("data-v-7cdf8d63");const w={class:"grid-content grid-con-1"},m=d("i",{class:"el-icon-user-solid grid-con-icon"},null,-1),P={class:"grid-cont-right"},T={class:"grid-num"},k=d("div",null,"今日访问量",-1),S={class:"grid-cont-right"},A={class:"grid-num"},M=d("div",null,"今日活跃用户",-1),C={class:"grid-content grid-con-3"},I=d("i",{class:"el-icon-s-goods grid-con-icon"},null,-1),L={class:"grid-cont-right"},D={class:"grid-num"},R=d("div",null,"今日玩家交易量",-1),_={class:"grid-cont-right"},O={class:"grid-num"},B=d("div",null,"今日玩家交易额",-1),j={class:"grid-content grid-con-2"},E=d("i",{class:"el-icon-message-solid grid-con-icon"},null,-1),V={class:"grid-cont-right"},W={class:"grid-num"},q=d("div",null,"今日系统售卖量",-1),Y={class:"grid-cont-right"},X={class:"grid-num"},G=d("div",null,"今日系统售卖额",-1);c();const H=b(((t,e,a,i,s,l)=>{const h=g("el-card"),r=g("el-col"),c=g("el-row"),u=g("schart");return o(),n("div",null,[d(c,{gutter:24},{default:b((()=>[d(r,{span:24},{default:b((()=>[d(c,{gutter:24,class:"mgb20"},{default:b((()=>[d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover","body-style":{padding:"0px"}},{default:b((()=>[d("div",w,[m,d("div",P,[d("div",T,f(s.todayView),1),k]),d("div",S,[d("div",A,f(s.todayActive),1),M])])])),_:1})])),_:1}),d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover","body-style":{padding:"0px"}},{default:b((()=>[d("div",C,[I,d("div",L,[d("div",D,f(s.todayTrade),1),R]),d("div",_,[d("div",O,f(s.todayTradeAmount),1),B])])])),_:1})])),_:1}),d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover","body-style":{padding:"0px"}},{default:b((()=>[d("div",j,[E,d("div",V,[d("div",W,f(s.todaySell),1),q]),d("div",Y,[d("div",X,f(s.todaySellAmount),1),G])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),d(c,{gutter:24},{default:b((()=>[d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover"},{default:b((()=>[d(u,{ref:"user",class:"schart",canvasId:"user",options:s.user},null,8,["options"])])),_:1})])),_:1}),d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover"},{default:b((()=>[d(u,{ref:"trade",class:"schart",canvasId:"trade",options:s.trade},null,8,["options"])])),_:1})])),_:1}),d(r,{span:8},{default:b((()=>[d(h,{shadow:"hover"},{default:b((()=>[d(u,{ref:"sell",class:"schart",canvasId:"sell",options:s.sell},null,8,["options"])])),_:1})])),_:1})])),_:1})])}));x.render=H,x.__scopeId="data-v-7cdf8d63";export default x;
