import{A as e,$ as t,E as a,H as l,L as n,r as i,o as r,c as s,f as d,k as o,g as u,t as c,l as g}from"./vendor.531192b1.js";import"./moment.08a7f518.js";import{m as p}from"./md5.7a1c6620.js";const m={name:"ShopManage",mounted(){this.ctx=e(),this.initTableData(),this.initIconData()},data:()=>({instance:!1,editor:"",allIcon:null,currentViewStorage:{},storageDetailVisible:!1,currentPage:1,total:0,queryData:null,ctx:{},addVisible:!1,itemNameCache:[],queryParam:{steamid:"",eosid:"",username:"",itemname:"",status:"",group:"",itemtype:"",page:"1",limit:"10"},status:{1:"正常在售",2:"已售出",3:"已下架取回",4:"管理员删除"}}),methods:{handleEdtor(){if(!this.instance){console.log(t("#editor")),this.editor=new wangEditor("#editor");let e=this;this.editor.config.onchange=function(t){e.currentViewStorage.desc=t},this.editor.config.onchangeTimeout=100,this.editor.create(),this.instance=!0}this.editor.txt.html(this.currentViewStorage.desc)},getchanel(e){return this.chanels[e+""]},getstatus(e){return this.status[e+""]},getmd5:e=>p(e),updateStorage(e,t){var n={type:e+"",id:this.currentViewStorage.id+"",data:t+""};a.post("api/updateTradeeParam",n).then((e=>{"1"===e.data.respCode?l.success("修改成功"):(this.queryData=null,l.error(e.data.respMsg)),this.initTableData()}))},handleSizeChange(e){this.queryParam.limit=e+"",this.queryParam.page="1",this.initTableData()},handleCurrentChange(e){console.log(e),this.queryParam.page=e+"",this.initTableData()},initTableData(){a.post("api/getTradeByPage",this.queryParam).then((e=>{"1"===e.data.respCode?(this.queryData=e.data.data.data,this.total=e.data.data.count,t(".imgDesc").attr("src","'404'")):(this.queryData=null,l.error(e.data.respMsg))}))},handleDelete(e){n.confirm("确定要删除这个库存物品吗？").then((t=>{if("confirm"===t){var n={type:"itemStatus",id:e.id+"",data:"4"};a.post("api/updateTradeeParam",n).then((e=>{"1"===e.data.respCode?l.success("修改成功"):(this.queryData=null,l.error(e.data.respMsg)),this.initTableData()}))}})).catch((()=>{}))},openUpdate(e){this.storageDetailVisible=!0,this.currentViewStorage=e.row,t(".imgDescDetail").attr("src","'404'"),this.$nextTick((()=>{this.handleEdtor()}))},handleAvatarSuccess(){l({message:"上传成功!",type:"success"}),this.initIconData()},handleAvatarFaild(){l.error("上传失败"),this.initIconData()},initIconData(){a.post("api/getIconFile",{itemname:""}).then((e=>{if("1"===e.data.respCode){let t=e.data.data;this.allIcon=t}}))},handleSelectImage(e){this.currentViewStorage.avatar=e}}},h={class:"crumbs"},f=d("i",{class:"el-icon-lx-cascades"},null,-1),y=u(" 用户信息 "),x={class:"handle-box"},_=u("搜索"),V={class:"container"},b=u("编辑 "),v=u("删除 "),S=d("div",{class:"grid-content center"},null,-1),C={class:"grid-content center"},w=d("div",{class:"grid-content center"},"归属",-1),D={class:"grid-content"},k=d("div",{class:"grid-content center"},"SteamID",-1),P=d("div",{class:"grid-content center"},"EOSID",-1),T=d("div",{class:"grid-content center"},"物品状态",-1),q={class:"grid-content"},j={class:"grid-content"},I=u("修改"),U=d("div",{class:"grid-content center"},"物品名称",-1),z=d("div",{class:"grid-content center"},"物品品质",-1),E=d("div",{class:"grid-content center"},"库存数量",-1),M={class:"grid-content"},A={class:"grid-content"},L=u("修改 "),$=d("div",{class:"grid-content center"},"上架时间",-1),F=d("div",{class:"grid-content center"},"售出时间",-1),O=d("div",{class:"grid-content center"},"物品标签",-1),B=d("div",{class:"grid-content center"},"游戏内Data",-1),H={class:"container"},N=d("div",{class:"plugins-tips"}," 物品描述 ",-1),G=d("div",{class:"mgb20",id:"editor"},null,-1),J=u("修改描述 "),K={class:"dialog-footer"},Q=u("关闭");m.render=function(e,t,a,l,n,p){const m=i("el-breadcrumb-item"),R=i("el-breadcrumb"),W=i("el-option"),X=i("el-select"),Y=i("el-input"),Z=i("el-button"),ee=i("el-table-column"),te=i("el-table"),ae=i("el-pagination"),le=i("el-col"),ne=i("el-row"),ie=i("el-dialog");return r(),s("div",null,[d("div",h,[d(R,{separator:"/"},{default:o((()=>[d(m,null,{default:o((()=>[f,y])),_:1})])),_:1})]),d("div",x,[d(X,{modelValue:n.queryParam.itemtype,"onUpdate:modelValue":t[1]||(t[1]=e=>n.queryParam.itemtype=e),placeholder:"物品类型",class:"handle-select mr10",onChange:p.initTableData},{default:o((()=>[d(W,{key:"0",label:"全部",value:""}),d(W,{key:"普通物品",label:"普通物品",value:"普通物品"}),d(W,{key:"特殊物品",label:"特殊物品",value:"特殊物品"})])),_:1},8,["modelValue","onChange"]),d(X,{modelValue:n.queryParam.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.queryParam.status=e),placeholder:"物品状态",class:"handle-select mr10",onChange:p.initTableData},{default:o((()=>[d(W,{key:"0",label:"全部",value:""}),d(W,{key:"1",label:"正常在售",value:"1"}),d(W,{key:"2",label:"已售出",value:"2"}),d(W,{key:"3",label:"已下架取回",value:"3"}),d(W,{key:"4",label:"管理员删除",value:"4"})])),_:1},8,["modelValue","onChange"]),d(Y,{modelValue:n.queryParam.username,"onUpdate:modelValue":t[3]||(t[3]=e=>n.queryParam.username=e),placeholder:"用户名或者店铺名",class:"handle-input mr10"},null,8,["modelValue"]),d(Y,{modelValue:n.queryParam.steamid,"onUpdate:modelValue":t[4]||(t[4]=e=>n.queryParam.steamid=e),placeholder:"SteamID",class:"handle-input mr10"},null,8,["modelValue"]),d(Y,{modelValue:n.queryParam.eosid,"onUpdate:modelValue":t[5]||(t[5]=e=>n.queryParam.eosid=e),placeholder:"EOSID",class:"handle-input mr10"},null,8,["modelValue"]),d(Z,{type:"primary",icon:"el-icon-search",onClick:p.initTableData},{default:o((()=>[_])),_:1},8,["onClick"])]),d("div",V,[d(te,{border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",data:n.queryData},{default:o((()=>[d(ee,{prop:"id",label:"ID",width:"55",align:"center"}),d(ee,{label:"归属",align:"center"},{default:o((e=>[u(c(e.row.username),1)])),_:1}),d(ee,{label:"物品类型",align:"center"},{default:o((e=>[u(c("1"==e.row.itemtype?"游戏内物品":"特殊物品"),1)])),_:1}),d(ee,{label:"物品图标",width:80},{default:o((t=>[d("img",{class:"imgDesc",style:{width:"50px",height:"50px"},src:"404",onError:a=>e.$LoadTintImage(a.target,t.row.itemicon,t.row.itemtint)},null,40,["onError"])])),_:1}),d(ee,{label:"物品名",align:"center"},{default:o((e=>[u(c(null===e.row.translate||""===e.row.translate?e.row.couCurrType:e.row.translate),1)])),_:1}),d(ee,{label:"数量",align:"center"},{default:o((e=>[u(c(e.row.stock),1)])),_:1}),d(ee,{label:"获得时间",align:"center"},{default:o((e=>[u(c(e.row.forSellTime.substring(0,19).replace("T"," ")),1)])),_:1}),d(ee,{label:"状态",align:"center"},{default:o((e=>[u(c(p.getstatus(e.row.itemStatus)),1)])),_:1}),d(ee,{label:"操作",align:"center"},{default:o((e=>[d(Z,{type:"primary",icon:"el-icon-edit",size:"small",onClick:t=>p.openUpdate(e)},{default:o((()=>[b])),_:2},1032,["onClick"]),d(Z,{icon:"el-icon-delete",size:"small",class:"red",onClick:t=>p.handleDelete(e.row)},{default:o((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),d(ae,{currentPage:n.currentPage,"onUpdate:currentPage":t[6]||(t[6]=e=>n.currentPage=e),"page-size":n.queryParam.limit,"onUpdate:page-size":t[7]||(t[7]=e=>n.queryParam.limit=e),"page-sizes":[10,50,200,1e3],disabled:!1,background:!0,layout:"total, sizes, prev, pager, next",total:n.total,onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),d(ie,{title:"详细信息",modelValue:n.storageDetailVisible,"onUpdate:modelValue":t[15]||(t[15]=e=>n.storageDetailVisible=e),width:"40%","append-to-body":!0,"close-on-click-modal":!1},{footer:o((()=>[d("span",K,[d(Z,{type:"primary",onClick:t[14]||(t[14]=()=>{this.storageDetailVisible=!1})},{default:o((()=>[Q])),_:1})])])),default:o((()=>[d(ne,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[S])),_:1}),d(le,{span:16},{default:o((()=>[d("div",C,[d("img",{class:"imgDescDetail",style:{height:"100px"},src:"404",onError:t[8]||(t[8]=t=>e.$LoadTintImage(t.target,n.currentViewStorage.itemicon,n.currentViewStorage.itemtint))},null,32)])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[w])),_:1}),d(le,{span:16},{default:o((()=>[d("div",D,[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.username)},null,8,["textContent"])])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[k])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.gameentityid)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[P])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.platformid)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[T])),_:1}),d(le,{span:16},{default:o((()=>[d("div",q,[d(X,{modelValue:n.currentViewStorage.itemStatus,"onUpdate:modelValue":t[9]||(t[9]=e=>n.currentViewStorage.itemStatus=e),placeholder:"物品状态",class:"handle-select mr10"},{default:o((()=>[d(W,{key:"1",label:"正常在售",value:1}),d(W,{key:"2",label:"已售出",value:2}),d(W,{key:"3",label:"已下架取回",value:3}),d(W,{key:"4",label:"管理员删除",value:"4"})])),_:1},8,["modelValue"])])])),_:1}),d(le,{span:4},{default:o((()=>[d("div",j,[d(Z,{type:"primary",onClick:t[10]||(t[10]=e=>p.updateStorage("itemStatus",n.currentViewStorage.itemStatus))},{default:o((()=>[I])),_:1})])])),_:1})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[U])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(null===n.currentViewStorage.translate||""===n.currentViewStorage.translate?n.currentViewStorage.couCurrType:n.currentViewStorage.translate)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[z])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.quality)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[E])),_:1}),d(le,{span:16},{default:o((()=>[d("div",M,[d(Y,{modelValue:n.currentViewStorage.stock,"onUpdate:modelValue":t[11]||(t[11]=e=>n.currentViewStorage.stock=e)},null,8,["modelValue"])])])),_:1}),d(le,{span:4},{default:o((()=>[d("div",A,[d(Z,{type:"primary",onClick:t[12]||(t[12]=e=>p.updateStorage("stock",n.currentViewStorage.stock))},{default:o((()=>[L])),_:1})])])),_:1})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[$])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.forSellTime.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),2==n.currentViewStorage.itemStatus?(r(),s(ne,{key:0,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[F])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.selledTime.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1})):g("",!0),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[O])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.class1)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:4},{default:o((()=>[B])),_:1}),d(le,{span:16},{default:o((()=>[d("div",{class:"grid-content",textContent:c(n.currentViewStorage.itemdata)},null,8,["textContent"])])),_:1}),d(le,{span:4})])),_:1}),d(ne,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[d(le,{span:20},{default:o((()=>[d("div",H,[N,G,d(Z,{type:"primary",onClick:t[13]||(t[13]=e=>p.updateStorage("desc",n.currentViewStorage.desc))},{default:o((()=>[J])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])};export default m;
