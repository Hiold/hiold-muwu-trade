import{A as e,$ as t,E as a,H as l,L as n,r,o as i,c as u,f as s,k as o,g as d,t as c,l as g}from"./vendor.531192b1.js";import"./moment.08a7f518.js";import{m as p}from"./md5.7a1c6620.js";const m={name:"ShopManage",mounted(){this.ctx=e(),this.initTableData(),this.initIconData()},data:()=>({instance:!1,editor:"",allIcon:null,currentViewStorage:{},storageDetailVisible:!1,currentPage:1,total:0,queryData:null,ctx:{},addVisible:!1,itemNameCache:[],queryParam:{steamid:"",eosid:"",username:"",itemname:"",getchanel:"",status:"",group:"",itemtype:"",page:"1",limit:"10"},chanels:{1:"系统中获得",2:"下架物品",3:"玩家交易",4:"供货",5:"游戏内容器",6:"签到",7:"补签",8:"抽奖",9:"阶段任务",10:"红包"},status:{1:"正常在库",2:"已发放到游戏内",3:"自行删除",4:"自行卖出",5:"供货消耗",6:"抽奖消耗",7:"补签消耗",8:"管理员删除"}}),methods:{handleEdtor(){if(!this.instance){console.log(t("#editor")),this.editor=new wangEditor("#editor");let e=this;this.editor.config.onchange=function(t){e.currentViewStorage.desc=t},this.editor.config.onchangeTimeout=100,this.editor.create(),this.instance=!0}this.editor.txt.html(this.currentViewStorage.desc)},getchanel(e){return this.chanels[e+""]},getstatus(e){return this.status[e+""]},getmd5:e=>p(e),updateStorage(e,t){var n={type:e+"",id:this.currentViewStorage.id+"",data:t+""};a.post("api/updateUserStorageParam",n).then((e=>{"1"===e.data.respCode?l.success("修改成功"):(this.queryData=null,l.error(e.data.respMsg)),this.initTableData()}))},handleSizeChange(e){this.queryParam.limit=e+"",this.queryParam.page="1",this.initTableData()},handleCurrentChange(e){console.log(e),this.queryParam.page=e+"",this.initTableData()},initTableData(){a.post("api/getStorageByPage",this.queryParam).then((e=>{"1"===e.data.respCode?(this.queryData=e.data.data.data,this.total=e.data.data.count,t(".imgDesc").attr("src","'404'")):(this.queryData=null,l.error(e.data.respMsg))}))},handleDelete(e){n.confirm("确定要删除这个库存物品吗？").then((t=>{if("confirm"===t){var n={type:"itemStatus",id:e.id+"",data:"8"};a.post("api/updateUserStorageParam",n).then((e=>{"1"===e.data.respCode?l.success("修改成功"):(this.queryData=null,l.error(e.data.respMsg)),this.initTableData()}))}})).catch((()=>{}))},openUpdate(e){this.storageDetailVisible=!0,this.currentViewStorage=e.row,t(".imgDescDetail").attr("src","'404'"),this.$nextTick((()=>{this.handleEdtor()}))},handleAvatarSuccess(){l({message:"上传成功!",type:"success"}),this.initIconData()},handleAvatarFaild(){l.error("上传失败"),this.initIconData()},initIconData(){a.post("api/getIconFile",{itemname:""}).then((e=>{if("1"===e.data.respCode){let t=e.data.data;this.allIcon=t}}))},handleSelectImage(e){this.currentViewStorage.avatar=e}}},y={class:"crumbs"},h=s("i",{class:"el-icon-lx-cascades"},null,-1),f=d(" 用户信息 "),x={class:"handle-box"},C=d("搜索"),V={class:"container"},v=d("编辑 "),_=d("删除 "),S=s("div",{class:"grid-content center"},null,-1),b={class:"grid-content center"},w=s("div",{class:"grid-content center"},"归属",-1),k={class:"grid-content"},T=s("div",{class:"grid-content center"},"SteamID",-1),D=s("div",{class:"grid-content center"},"EOSID",-1),P=s("div",{class:"grid-content center"},"物品状态",-1),q={class:"grid-content"},j={class:"grid-content"},I=d("修改"),U=s("div",{class:"grid-content center"},"物品名称",-1),z=s("div",{class:"grid-content center"},"物品品质",-1),E=s("div",{class:"grid-content center"},"库存数量",-1),M={class:"grid-content"},A={class:"grid-content"},L=d("修改 "),$=s("div",{class:"grid-content center"},"获得时间",-1),F=s("div",{class:"grid-content center"},"发放到游戏内时间",-1),G=s("div",{class:"grid-content center"},"获得渠道",-1),O=s("div",{class:"grid-content center"},"物品标签",-1),B=s("div",{class:"grid-content center"},"游戏内Data",-1),H=s("div",{class:"grid-content center"},"优惠券类型",-1),N=s("div",{class:"grid-content center"},"折扣",-1),J=s("div",{class:"grid-content center"},"使用条件",-1),K=s("div",{class:"grid-content center"},"使用条件",-1),Q=s("div",{class:"grid-content center"},"有效期始",-1),R=s("div",{class:"grid-content center"},"有效期止",-1),W={class:"container"},X=s("div",{class:"plugins-tips"}," 物品描述 ",-1),Y=s("div",{class:"mgb20",id:"editor"},null,-1),Z=d("修改描述 "),ee={class:"dialog-footer"},te=d("关闭");m.render=function(e,t,a,l,n,p){const m=r("el-breadcrumb-item"),ae=r("el-breadcrumb"),le=r("el-option"),ne=r("el-select"),re=r("el-input"),ie=r("el-button"),ue=r("el-table-column"),se=r("el-table"),oe=r("el-pagination"),de=r("el-col"),ce=r("el-row"),ge=r("el-dialog");return i(),u("div",null,[s("div",y,[s(ae,{separator:"/"},{default:o((()=>[s(m,null,{default:o((()=>[h,f])),_:1})])),_:1})]),s("div",x,[s(ne,{modelValue:n.queryParam.itemtype,"onUpdate:modelValue":t[1]||(t[1]=e=>n.queryParam.itemtype=e),placeholder:"物品类型",class:"handle-select mr10",onChange:p.initTableData},{default:o((()=>[s(le,{key:"普通物品",label:"普通物品",value:"普通物品"}),s(le,{key:"特殊物品",label:"特殊物品",value:"特殊物品"})])),_:1},8,["modelValue","onChange"]),s(ne,{modelValue:n.queryParam.getchanel,"onUpdate:modelValue":t[2]||(t[2]=e=>n.queryParam.getchanel=e),placeholder:"获取的途径",class:"handle-select mr10",onChange:p.initTableData},{default:o((()=>[s(le,{key:"0",label:"全部",value:""}),s(le,{key:"1",label:"系统中获得",value:"1"}),s(le,{key:"2",label:"下架物品",value:"2"}),s(le,{key:"3",label:"玩家交易",value:"3"}),s(le,{key:"4",label:"供货",value:"4"}),s(le,{key:"5",label:"游戏内容器",value:"5"}),s(le,{key:"6",label:"签到",value:"6"}),s(le,{key:"7",label:"补签",value:"7"}),s(le,{key:"8",label:"抽奖",value:"8"}),s(le,{key:"9",label:"阶段任务",value:"9"}),s(le,{key:"10",label:"红包",value:"10"})])),_:1},8,["modelValue","onChange"]),s(ne,{modelValue:n.queryParam.status,"onUpdate:modelValue":t[3]||(t[3]=e=>n.queryParam.status=e),placeholder:"物品状态",class:"handle-select mr10",onChange:p.initTableData},{default:o((()=>[s(le,{key:"0",label:"全部",value:""}),s(le,{key:"1",label:"正常在库",value:"1"}),s(le,{key:"2",label:"已发放到游戏内",value:"2"}),s(le,{key:"3",label:"自行删除",value:"3"}),s(le,{key:"4",label:"自行卖出",value:"5"}),s(le,{key:"5",label:"供货消耗",value:"6"}),s(le,{key:"6",label:"抽奖消耗",value:"6"}),s(le,{key:"7",label:"补签消耗",value:"7"}),s(le,{key:"8",label:"管理员删除",value:"8"})])),_:1},8,["modelValue","onChange"]),s(re,{modelValue:n.queryParam.username,"onUpdate:modelValue":t[4]||(t[4]=e=>n.queryParam.username=e),placeholder:"用户名或者店铺名",class:"handle-input mr10"},null,8,["modelValue"]),s(re,{modelValue:n.queryParam.steamid,"onUpdate:modelValue":t[5]||(t[5]=e=>n.queryParam.steamid=e),placeholder:"SteamID",class:"handle-input mr10"},null,8,["modelValue"]),s(re,{modelValue:n.queryParam.eosid,"onUpdate:modelValue":t[6]||(t[6]=e=>n.queryParam.eosid=e),placeholder:"EOSID",class:"handle-input mr10"},null,8,["modelValue"]),s(ie,{type:"primary",icon:"el-icon-search",onClick:p.initTableData},{default:o((()=>[C])),_:1},8,["onClick"])]),s("div",V,[s(se,{border:"",class:"table",ref:"multipleTable","header-cell-class-name":"table-header",data:n.queryData},{default:o((()=>[s(ue,{prop:"id",label:"ID",width:"55",align:"center"}),s(ue,{label:"归属",align:"center"},{default:o((e=>[d(c(e.row.username),1)])),_:1}),s(ue,{label:"物品类型",align:"center"},{default:o((e=>[d(c("1"==e.row.itemtype?"游戏内物品":"特殊物品"),1)])),_:1}),s(ue,{label:"物品图标",width:80},{default:o((t=>[s("img",{class:"imgDesc",style:{width:"50px",height:"50px"},src:"404",onError:a=>e.$LoadTintImage(a.target,t.row.itemicon,t.row.itemtint)},null,40,["onError"])])),_:1}),s(ue,{label:"物品名",align:"center"},{default:o((e=>[d(c(null===e.row.translate||""===e.row.translate?e.row.couCurrType:e.row.translate),1)])),_:1}),s(ue,{label:"数量",align:"center"},{default:o((e=>[d(c(e.row.storageCount),1)])),_:1}),s(ue,{label:"获得时间",align:"center"},{default:o((e=>[d(c(e.row.collectTime.substring(0,19).replace("T"," ")),1)])),_:1}),s(ue,{label:"获得途径",align:"center"},{default:o((e=>[d(c(p.getchanel(e.row.itemGetChenal)),1)])),_:1}),s(ue,{label:"状态",align:"center"},{default:o((e=>[d(c(p.getstatus(e.row.itemStatus)),1)])),_:1}),s(ue,{label:"操作",align:"center"},{default:o((e=>[s(ie,{type:"primary",icon:"el-icon-edit",size:"small",onClick:t=>p.openUpdate(e)},{default:o((()=>[v])),_:2},1032,["onClick"]),s(ie,{icon:"el-icon-delete",size:"small",class:"red",onClick:t=>p.handleDelete(e.row)},{default:o((()=>[_])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s(oe,{currentPage:n.currentPage,"onUpdate:currentPage":t[7]||(t[7]=e=>n.currentPage=e),"page-size":n.queryParam.limit,"onUpdate:page-size":t[8]||(t[8]=e=>n.queryParam.limit=e),"page-sizes":[10,50,200,1e3],disabled:!1,background:!0,layout:"total, sizes, prev, pager, next",total:n.total,onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange},null,8,["currentPage","page-size","total","onSizeChange","onCurrentChange"])]),s(ge,{title:"详细信息",modelValue:n.storageDetailVisible,"onUpdate:modelValue":t[16]||(t[16]=e=>n.storageDetailVisible=e),width:"40%","append-to-body":!0,"close-on-click-modal":!1},{footer:o((()=>[s("span",ee,[s(ie,{type:"primary",onClick:t[15]||(t[15]=()=>{this.storageDetailVisible=!1})},{default:o((()=>[te])),_:1})])])),default:o((()=>[s(ce,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[S])),_:1}),s(de,{span:16},{default:o((()=>[s("div",b,[s("img",{class:"imgDescDetail",style:{height:"100px"},src:"404",onError:t[9]||(t[9]=t=>e.$LoadTintImage(t.target,n.currentViewStorage.itemicon,n.currentViewStorage.itemtint))},null,32)])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[w])),_:1}),s(de,{span:16},{default:o((()=>[s("div",k,[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.username)},null,8,["textContent"])])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[T])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.gameentityid)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[D])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.platformid)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[P])),_:1}),s(de,{span:16},{default:o((()=>[s("div",q,[s(ne,{modelValue:n.currentViewStorage.itemStatus,"onUpdate:modelValue":t[10]||(t[10]=e=>n.currentViewStorage.itemStatus=e),placeholder:"物品状态",class:"handle-select mr10"},{default:o((()=>[s(le,{key:"1",label:"正常在库",value:1}),s(le,{key:"2",label:"已发放到游戏内",value:2}),s(le,{key:"3",label:"自行删除",value:3}),s(le,{key:"4",label:"自行卖出",value:4}),s(le,{key:"5",label:"供货消耗",value:5}),s(le,{key:"6",label:"抽奖消耗",value:6}),s(le,{key:"7",label:"补签消耗",value:7}),s(le,{key:"8",label:"管理员删除",value:8})])),_:1},8,["modelValue"])])])),_:1}),s(de,{span:4},{default:o((()=>[s("div",j,[s(ie,{type:"primary",onClick:t[11]||(t[11]=e=>p.updateStorage("itemStatus",n.currentViewStorage.itemStatus))},{default:o((()=>[I])),_:1})])])),_:1})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[U])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(null===n.currentViewStorage.translate||""===n.currentViewStorage.translate?n.currentViewStorage.couCurrType:n.currentViewStorage.translate)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[z])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.quality)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{style:{"line-height":"40px","margin-top":"10px"},gutter:20,type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[E])),_:1}),s(de,{span:16},{default:o((()=>[s("div",M,[s(re,{modelValue:n.currentViewStorage.storageCount,"onUpdate:modelValue":t[12]||(t[12]=e=>n.currentViewStorage.storageCount=e)},null,8,["modelValue"])])])),_:1}),s(de,{span:4},{default:o((()=>[s("div",A,[s(ie,{type:"primary",onClick:t[13]||(t[13]=e=>p.updateStorage("storageCount",n.currentViewStorage.storageCount))},{default:o((()=>[L])),_:1})])])),_:1})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[$])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.collectTime.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),2==n.currentViewStorage.itemStatus?(i(),u(ce,{key:0,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[F])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.obtainTime.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[G])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(p.getchanel(n.currentViewStorage.itemGetChenal))},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[O])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.class1)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[B])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.itemdata)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1}),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType?(i(),u(ce,{key:1,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[H])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.couCurrType)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType?(i(),u(ce,{key:2,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[N])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.couPrice)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType?(i(),u(ce,{key:3,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[J])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.couCond)},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType?(i(),u(ce,{key:4,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[K])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(1==n.currentViewStorage.coudatelimit?"限期使用":"不限期")},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType&&"1"==n.currentViewStorage.coudatelimit?(i(),u(ce,{key:5,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[Q])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.couDateStart.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),""!=n.currentViewStorage.couCurrType&&null!=n.currentViewStorage.couCurrType&&"0"!=n.currentViewStorage.couCurrType&&"1"==n.currentViewStorage.coudatelimit?(i(),u(ce,{key:6,gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:4},{default:o((()=>[R])),_:1}),s(de,{span:16},{default:o((()=>[s("div",{class:"grid-content",textContent:c(n.currentViewStorage.couDateEnd.substring(0,19).replace("T"," "))},null,8,["textContent"])])),_:1}),s(de,{span:4})])),_:1})):g("",!0),s(ce,{gutter:20,style:{"line-height":"40px","margin-top":"10px"},type:"flex",justify:"center",align:"middle"},{default:o((()=>[s(de,{span:20},{default:o((()=>[s("div",W,[X,Y,s(ie,{type:"primary",onClick:t[14]||(t[14]=e=>p.updateStorage("desc",n.currentViewStorage.desc))},{default:o((()=>[Z])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])])};export default m;
